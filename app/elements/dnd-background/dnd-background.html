<dom-module id="dnd-background">

	<style>
		paper-toolbar {
            background-color: #800;
            height: 40px;

          --paper-toolbar: {
            @apply(--layout-vertical);
          };
        }

        .notes {
        	width: 270px;
        }

        .content {
        	padding: 15px 15px 15px 15px;
        }

	</style>

	<template>
		<iron-signals
            on-iron-signal-fbupdate="_updateBack">
        </iron-signals>
		<paper-header-panel>
			<paper-toolbar>
				<table width="100%">
					<tr>
						<td><paper-icon-button icon="menu" on-tap="toggleCont"></paper-icon-button>
						<td><div class="paper-header">Character Background</div></td>
					</tr>
				</table>
			</paper-toolbar>

			<!-- stuff -->
			<iron-collapse id="contentCollapse">
				<div class="content">
					
						<table width="100%">
							<tr>
								<div class="notes">
									<paper-textarea id="notes_field" name="notes" class="notes" value="{{notes}}" label="Notes"></paper-textarea>
								</div>
							</tr>
						</table>
						<paper-button raised on-tap="submitSave">Save</paper-button>
				</div>
			</iron-collapse>

		</paper-header-panel>

	</template>

</dom-module>

<script>
	Polymer({
		is: "dnd-background",

		ready: function() {
			this.$.contentCollapse.opened = true;
		},

		properties: {
			notes: {
				type: String,
				notify: true
			}
		},

		toggleCont: function() {
			this.$.contentCollapse.toggle();
		},

		submitSave: function(e) {
			app.backgroundData = {notes: this.notes};
			//app.$.background.$.ref._setData({notes: this.notes});
		},

		_updateBack: function(e) {
			app.$.background.update(e, this);
		}
	});
</script>